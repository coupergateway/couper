<nav class="w-1/5 min-w-min grow-0 p-2">
    {{ $currentPage := . }}

    {{/* Get all sections and sort them */}}
    {{ range .Site.Sections.ByWeight }}
        <div class="mb-4">
            <div class="font-semibold text-lg text-amber-500 mb-2">{{ .Title }}</div>

            {{/* List regular pages in this section */}}
            {{ range .Pages.ByWeight }}
                {{ $isActive := eq $currentPage.RelPermalink .RelPermalink }}
                <div class="text-base pl-2 border-l-2{{ if $isActive }} border-sky-400 text-sky-500 rounded-r-md router-link-active router-link-exact-active{{ end }}">
                    <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                </div>
            {{ end }}

            {{/* Check for subsections (like block/) */}}
            {{ range .Sections }}
                <div class="pl-2 mt-2">
                    <div class="font-semibold text-amber-500 mb-1">{{ .Title }}</div>
                    {{ range .Pages.ByWeight }}
                        {{ $isActive := eq $currentPage.RelPermalink .RelPermalink }}
                        <div class="text-base pl-2 border-l-2{{ if $isActive }} border-sky-400 text-sky-500 rounded-r-md router-link-active router-link-exact-active{{ end }}">
                            <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                        </div>
                    {{ end }}
                </div>
            {{ end }}
        </div>
    {{ end }}
</nav>
