# OAuth2

The `oauth2` block in the [Backend Block](#backend-block) context configures the OAuth2 Client Credentials flow to request a bearer token for the backend request.

| Block name | Context                         | Label    | Nested block(s)                 |
|:-----------|:--------------------------------|:---------|:--------------------------------|
| `oauth2`   | [Backend Block](#backend-block) | no label | [Backend Block](#backend-block) |

| Attribute(s)                 | Type    | Default                 | Description                                                                                                                     | Characteristic(s)                                                                                                                                                                                 | Example                             |
|:-----------------------------|:--------|:------------------------|:--------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:------------------------------------|
| `backend`                    | string  | -                       | [Backend Block Reference](#backend-block)                                                                                       | -                                                                                                                                                                                                 | -                                   |
| `grant_type`                 | string  | -                       | -                                                                                                                               | &#9888; required, to be set to: `client_credentials`                                                                                                                                              | `grant_type = "client_credentials"` |
| `token_endpoint`             | string  | -                       | URL of the token endpoint at the authorization server.                                                                          | &#9888; required                                                                                                                                                                                  | -                                   |
| `client_id`                  | string  | -                       | The client identifier.                                                                                                          | &#9888; required                                                                                                                                                                                  | -                                   |
| `client_secret`              | string  | -                       | The client password.                                                                                                            | &#9888; required.                                                                                                                                                                                 | -                                   |
| `retries`                    | integer | `1`                     | The number of retries to get the token and resource, if the resource-request responds with `401 Unauthorized` HTTP status code. | -                                                                                                                                                                                                 | -                                   |
| `token_endpoint_auth_method` | string  | `"client_secret_basic"` | Defines the method to authenticate the client at the token endpoint.                                                            | If set to `"client_secret_post"`, the client credentials are transported in the request body. If set to `"client_secret_basic"`, the client credentials are transported via Basic Authentication. | -                                   |
| `scope`                      | string  | -                       | A space separated list of requested scope values for the access token.                                                          | -                                                                                                                                                                                                 | `scope = "read write"`              |

The HTTP header field `Accept: application/json` is automatically added to the token request. This can be modified with [request header modifiers](#request-header) in a [backend block](#backend-block).
