# Request

The `request` block creates and executes a request to a backend service.

&#9888; Multiple [Proxy](#proxy-block) and `request` blocks are executed in parallel.

| Block name | Context                           | Label                                                                                                                                                                                                                                                                      | Nested block(s)                                                                                                             |
|:-----------|:----------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------|
| `request`  | [Endpoint Block](#endpoint-block) | &#9888; A [Proxy Block](#proxy-block) or [Request Block](#request-block) w/o a label has an implicit label `"default"`. Only **one** [Proxy Block](#proxy-block) or [Request Block](#request-block) w/ label `"default"` per [Endpoint Block](#endpoint-block) is allowed. | [Backend Block](#backend-block) (&#9888; required, if no `backend` block reference is defined or no `url` attribute is set. |
<!-- TODO: add available http methods -->

| Attribute(s)      | Type                                      | Default | Description                                                                                                                                                                                                                                                  | Characteristic(s)                                                                                                                                                                      | Example           |
|:------------------|:------------------------------------------|:--------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:------------------|
| `backend`         | string                                    | -       | `backend` block reference, defined in [Definitions Block](#definitions-block)                                                                                                                                                                                | &#9888; required, if no [Backend Block](#backend-block) is defined.                                                                                                                    | `backend = "foo"` |
| `body`            | string                                    | -       | -                                                                                                                                                                                                                                                            | Creates implicit default `Content-Type: text/plain` header field.                                                                                                                      | -                 |
| `expected_status` | tuple (number)                            | -       | If defined, the response status code will be verified against this list of codes. If the status-code is unexpected an [`unexpected_status` error](ERRORS.md#error-types) can be handled with an [`error_handler`](ERRORS.md#endpoint-related-error_handler). | -                                                                                                                                                                                      | -                 |
| `form_body`       | object                                    | -       | -                                                                                                                                                                                                                                                            | Creates implicit default `Content-Type: application/x-www-form-urlencoded` header field.                                                                                               | -                 |
| `headers`         | object                                    | -       | -                                                                                                                                                                                                                                                            | Same as `set_request_headers` in [Request Header](#request-header).                                                                                                                    | -                 |
| `json_body`       | null, bool, number, string, object, tuple | -       | -                                                                                                                                                                                                                                                            | Creates implicit default `Content-Type: text/plain` header field.                                                                                                                      | -                 |
| `method`          | string                                    | `"GET"` | -                                                                                                                                                                                                                                                            | -                                                                                                                                                                                      | -                 |
| `query_params`    | -                                         | -       | -                                                                                                                                                                                                                                                            | Same as `set_query_params` in [Query Parameter](#query-parameter).                                                                                                                     | -                 |
| `url`             | string                                    | -       | -                                                                                                                                                                                                                                                            | If defined, the host part of the URL must be the same as the `origin` attribute of the used [Backend Block](#backend-block) or [Backend Block Reference](#backend-block) (if defined). | -                 |
